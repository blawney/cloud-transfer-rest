<!DOCTYPE html>
{% load static %}
<html>
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap CSS -->
		<!--<link rel="stylesheet" href="bootstrap.min.css">-->
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

        <link rel="stylesheet" href="{%static "transfer_app/css/style.css" %}">
	</head>
	<body>
        <div id="wrapper">
        <div id="main-container" class="main-container">
            <div id="menu">
                <ul id="menu-list">
                        <li class="section-chooser" content-target="download">
                            <div class="svg-wrapper">
                                <svg width="100%" height="100%" class="octicon octicon-cloud-download" viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M9 12h2l-3 3-3-3h2V7h2v5zm3-8c0-.44-.91-3-4.5-3C5.08 1 3 2.92 3 5 1.02 5 0 6.52 0 8c0 1.53 1 3 3 3h3V9.7H3C1.38 9.7 1.3 8.28 1.3 8c0-.17.05-1.7 1.7-1.7h1.3V5c0-1.39 1.56-2.7 3.2-2.7 2.55 0 3.13 1.55 3.2 1.8v1.2H12c.81 0 2.7.22 2.7 2.2 0 2.09-2.25 2.2-2.7 2.2h-2V11h2c2.08 0 4-1.16 4-3.5C16 5.06 14.08 4 12 4z" style="fill:#646464;"/></svg>
                            </div>
                        </li>
                        <li class="section-chooser" content-target="upload">
                            <div class="svg-wrapper">
                                <svg width="100%" height="100%" class="octicon octicon-cloud-upload" viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M7 9H5l3-3 3 3H9v5H7V9zm5-4c0-.44-.91-3-4.5-3C5.08 2 3 3.92 3 6 1.02 6 0 7.52 0 9c0 1.53 1 3 3 3h3v-1.3H3c-1.62 0-1.7-1.42-1.7-1.7 0-.17.05-1.7 1.7-1.7h1.3V6c0-1.39 1.56-2.7 3.2-2.7 2.55 0 3.13 1.55 3.2 1.8v1.2H12c.81 0 2.7.22 2.7 2.2 0 2.09-2.25 2.2-2.7 2.2h-2V12h2c2.08 0 4-1.16 4-3.5C16 6.06 14.08 5 12 5z" style="fill:#646464;"></path>
                                </svg>
                            </div>
                        </li>
                        <li class="section-chooser" content-target="history">
                            <div class="svg-wrapper">
                            <svg width="100%" height="100%" class="octicon octicon-history" viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M8 13H6V6h5v2H8v5zM7 1C4.81 1 2.87 2.02 1.59 3.59L0 2v4h4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7s7-3.14 7-7-3.14-7-7-7z" style="fill:#646464;"></path></svg>
                            </div>
                        </li>
                </ul>
            </div>
            <div id="content">
                <div id="splash" class="subcontent active">
                    <h2>Welcome</h2>
                    <p>Select from the menu to initiate uploads, downloads, or check your history.</p>
                </div>
                <div id="upload" class="subcontent">
                    <h3>Uploads</h3>
                    Upload files to our system for analysis by choosing from the storage providers below.
                    <div class="providers-wrapper">
                             <img class="provider-btn" src="{% static "transfer_app/img/Dropbox.png" %}">
                            <img class="provider-btn" src="{% static "transfer_app/img/google-drive-logo-lockup.png" %}">
                    </div>
                </div>
                <div id="download" class="subcontent">
                    <h3>Downloads</h3>
                                        
                    <p><b>1.</b> Select files.</p>

                    <table id="download-table" class="custom-table">
                        <thead>
                            <tr>
                                <th><input class="select-all-checkbox" table-target="download-table" type="checkbox"/></th>
                                <th>Filename</th>
                                <th>File size</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox"/></td>
                                <td>SampleA.fastq.gz</td>
                                <td>2.3Gb</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox"/></td>
                                <td>SampleB.fastq.gz</td>
                                <td>1.8Gb</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox"/></td>
                                <td>SampleC.fastq.gz</td>
                                <td>1.9Gb</td>
                            </tr>
                        </tbody>
                    </table>
                    <p><b>2.</b> Choose a storage service.</p>
                    <div class="providers-wrapper">
                        <img class="provider-btn" src="{% static "transfer_app/img/Dropbox.png" %}">
                        <img class="provider-btn" src="{% static "transfer_app/img/google-drive-logo-lockup.png" %}">
                    </div>
                </div>
                <div id="history" class="subcontent">
                    <h3>History</h3>
                    
                        <table id="history-table" class="custom-table">
                        <thead>
                            <tr>
                                <th>Filename</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SampleA.fastq.gz</td>
                                <td><a href="#">view</a></td>
                            </tr>
                            <tr>
                                <td>SampleB.fastq.gz</td>
                                <td><a href="#">view</a></td>
                            </tr>
                            <tr>
                                <td>SampleC.fastq.gz</td>
                                <td><a href="#">view</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
            </div></div>
                <script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="434yn436p3z4rg0"></script>
        <script>
            
            /* START Dropbox JS */
            
            var options = {

                // Required. Called when a user selects an item in the Chooser.
                success: function(files) {
                    alert("Here's the file link: " + files[0].link)
                },

                // Optional. Called when the user closes the dialog without selecting a file
                // and does not include any parameters.
                cancel: function() {

                },

                // Optional. "preview" (default) is a preview link to the document for sharing,
                // "direct" is an expiring link to download the contents of the file. For more
                // information about link types, see Link types below.
                linkType: "direct",

                // Optional. A value of false (default) limits selection to a single file, while
                // true enables multiple file selection.
                multiselect: true,
            };
            
            $("#dropbox-upload").click(function(e){
                Dropbox.choose(options);
            });
            
            /* END Dropbox JS */
                        
            
            
            
            /* START Google Drive JS */
            // The Browser API key obtained from the Google API Console.
            // Replace with your own Browser API key, or your own key.
            var developerKey = 'AIzaSyClJS75QXASJLLmb5dq8VPc0gjAusGfGnE';

            // The Client ID obtained from the Google API Console. Replace with your own Client ID.
            var clientId = "926067285135-erhkvspo559gq4gi6o9bnh8bf4n2njrq.apps.googleusercontent.com"

            // Replace with your own project number from console.developers.google.com.
            // See "Project number" under "IAM & Admin" > "Settings"
            var appId = "926067285135";

            // Scope to use to access user's Drive items.
            var scope = ['https://www.googleapis.com/auth/drive'];

            var pickerApiLoaded = false;
            var oauthToken;

            // Use the Google API Loader script to load the google.picker script.
            function loadPicker() {
                console.log('load picker!!');
                gapi.load('auth', {'callback': onAuthApiLoad});
                gapi.load('picker', {'callback': onPickerApiLoad});
            }

            function onAuthApiLoad() {
                window.gapi.auth.authorize(
                    {
                        'client_id': clientId,
                        'scope': scope,
                        'immediate': false
                    },
                    handleAuthResult
                );
            }

            function onPickerApiLoad() {
                console.log('in OnPickerAPILoad');
                pickerApiLoaded = true;
                createPicker();
            }

            function handleAuthResult(authResult) {
                console.log('handling auth ersults');
                console.log(authResult);
                if (authResult && !authResult.error) {
                    oauthToken = authResult.access_token;
                    createPicker();
                }
            }

            // Create and render a Picker object for searching images.
            function createPicker() {
                if (pickerApiLoaded && oauthToken) {
                    
                    // view all of Drive
                    var view = new google.picker.View(google.picker.ViewId.DOCS);
                    var picker = new google.picker.PickerBuilder()
                        .enableFeature(google.picker.Feature.NAV_HIDDEN)
                        .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)
                        .setAppId(appId)
                        .setOAuthToken(oauthToken)
                        .addView(view)
                        .setDeveloperKey(developerKey)
                        .setCallback(pickerCallback)
                        .build();
                    console.log('going to make visible');
                    picker.setVisible(true);
                }
            }

            // A simple callback implementation.
            function pickerCallback(data) {
            if (data.action == google.picker.Action.PICKED) {
                    var fileId = data.docs[0].id;
                    alert('The user selected: ' + fileId);
                }
            }
            
            /* END Google Drive JS */


            
            $(".section-chooser").click(function(){
                // remove class from siblings:
                var sibs = $(this).siblings();
                for(var i=0; i<sibs.length; i++){
                    console.log(sibs[i]);
                    $(sibs[i]).removeClass("selected");
                }
                // add selected class to this
                $(this).addClass("selected");

                // make some adjustments to borders around the tabs
                if ($(this).is(":first-child")){
                    $(this).addClass("first-tab");
                }
                 if ($(this).is(":last-child")){
                    $(this).addClass("last-tab");
                }
                
                //hide other content:
                $(".subcontent").hide();
                
                // show the content:
                var content_target = $(this).attr("content-target");
                var element = $("#" + content_target);
                $(element).toggle();
            })
            
            $(".select-all-checkbox").click(function(){
                var targetedTable = $(this).attr("table-target");
                var inputs = $("#" + targetedTable).find("input");

                console.log(targetedTable);
                if ($(this).prop("checked") == true){
                    console.log('was checked');
                    $(inputs).each(function(number, el){
                        console.log(el);
                        $(el).prop("checked", true);
                    });
                }else{
                    console.log('Not checked!');
                    $(inputs).each(function(number, el){
                        console.log(el);
                        $(el).prop("checked", false);
                    });                }
                
            });
            
        
        </script>
        <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>

    </body>
</html>
